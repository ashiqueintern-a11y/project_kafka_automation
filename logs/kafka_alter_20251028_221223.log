2025-10-28 22:12:23,074 - INFO - Log file: logs/kafka_alter_20251028_221223.log
2025-10-28 22:12:23,079 - INFO - ✓ Configuration loaded and validated
2025-10-28 22:12:23,080 - DEBUG - Checking /etc/kafka/conf/kafka-env.sh
2025-10-28 22:12:23,081 - INFO - Found Kafka from kafka-env.sh: /usr/odp/current/kafka-broker/bin
2025-10-28 22:12:23,081 - INFO - Using Kafka tools: /usr/odp/current/kafka-broker/bin
2025-10-28 22:12:23,081 - INFO - ================================================================================
2025-10-28 22:12:23,081 - INFO - KAFKA TOPIC ALTERATION
2025-10-28 22:12:23,081 - INFO - ================================================================================
2025-10-28 22:12:23,081 - INFO - Topics to process: 1
2025-10-28 22:12:23,081 - INFO -   - testing1
2025-10-28 22:12:23,082 - INFO - Dry run: False
2025-10-28 22:12:23,082 - INFO - ================================================================================
2025-10-28 22:12:23,082 - INFO - Testing broker connectivity...
2025-10-28 22:12:23,082 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-broker-api-versions.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667
2025-10-28 22:12:25,828 - INFO - ✓ Connected to brokers
2025-10-28 22:12:25,828 - INFO - 
================================================================================
2025-10-28 22:12:25,828 - INFO - PROCESSING TOPIC 1/1: testing1
2025-10-28 22:12:25,828 - INFO - ================================================================================
2025-10-28 22:12:25,828 - INFO - 
--------------------------------------------------------------------------------
2025-10-28 22:12:25,828 - INFO - PROCESSING: RETENTION ALTERATION
2025-10-28 22:12:25,829 - INFO - --------------------------------------------------------------------------------
2025-10-28 22:12:25,829 - INFO - ================================================================================
2025-10-28 22:12:25,830 - INFO - CONFIG CHANGE PRE-CHECKS: retention.ms
2025-10-28 22:12:25,830 - INFO - ================================================================================
2025-10-28 22:12:25,830 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-topics.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --describe --topic testing1
2025-10-28 22:12:28,712 - INFO - ✓ Topic exists
2025-10-28 22:12:28,712 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-configs.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --describe --entity-type topics --entity-name testing1
2025-10-28 22:12:31,489 - INFO - Current retention.ms: 604800000
2025-10-28 22:12:31,490 - INFO - Checking disk usage via kafka-log-dirs.sh...
2025-10-28 22:12:31,490 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-log-dirs.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --describe
2025-10-28 22:12:34,316 - ERROR - Failed to parse kafka-log-dirs.sh JSON output: Expecting value: line 1 column 1 (char 0)
2025-10-28 22:12:34,317 - DEBUG - Output was: Querying brokers for log directories information
Received log directory information from brokers 1001,1002,1003,1004
{"version":1,"brokers":[{"broker":1001,"logDirs":[{"logDir":"/data/kafka-logs","error":null,"partitions":[{"partition":"secound-2","size":0,"offsetLag":0,"isFuture":false},{"partition":"example.events.prod-9","size":0,"offsetLag":0,"isFuture":false},{"partition":"user-events-18","size":0,"offsetLag":0,"isFuture":false},{"partition":"production-0","size":0,"offsetLag":0,"isFuture":
2025-10-28 22:12:34,317 - INFO - ================================================================================
2025-10-28 22:12:34,317 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-configs.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --alter --entity-type topics --entity-name testing1 --add-config retention.ms=1209600000
2025-10-28 22:12:37,073 - INFO - ✓ Set retention.ms=1209600000
2025-10-28 22:12:37,073 - INFO - 
--------------------------------------------------------------------------------
2025-10-28 22:12:37,073 - INFO - PROCESSING: CONFIG ALTERATIONS
2025-10-28 22:12:37,073 - INFO - --------------------------------------------------------------------------------
2025-10-28 22:12:37,073 - INFO - 
Processing: min.insync.replicas=3
2025-10-28 22:12:37,073 - INFO - ================================================================================
2025-10-28 22:12:37,074 - INFO - CONFIG CHANGE PRE-CHECKS: min.insync.replicas
2025-10-28 22:12:37,074 - INFO - ================================================================================
2025-10-28 22:12:37,074 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-topics.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --describe --topic testing1
2025-10-28 22:12:39,999 - INFO - ✓ Topic exists
2025-10-28 22:12:39,999 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-configs.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --describe --entity-type topics --entity-name testing1
2025-10-28 22:12:42,870 - INFO - ✓ min.insync.replicas (3) <= RF (3)
2025-10-28 22:12:42,870 - INFO - ================================================================================
2025-10-28 22:12:42,871 - DEBUG - Running: /usr/odp/current/kafka-broker/bin/kafka-configs.sh --bootstrap-server stg-hdpashique101.phonepe.nb6:6667 --alter --entity-type topics --entity-name testing1 --add-config min.insync.replicas=3
2025-10-28 22:12:45,694 - INFO - ✓ Set min.insync.replicas=3
2025-10-28 22:12:45,695 - INFO - ✓ Successfully processed testing1
2025-10-28 22:12:45,695 - INFO - 
================================================================================
2025-10-28 22:12:45,695 - INFO - OPERATION SUMMARY
2025-10-28 22:12:45,695 - INFO - ================================================================================
2025-10-28 22:12:45,695 - INFO - ✓ Operation completed successfully
2025-10-28 22:12:45,695 - INFO - ================================================================================
